---
// Components
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import Recent from "../components/Recent.astro";
import Contribution from "../components/Contribution.astro";
import Socials from "../components/Socials.astro";

const siteTitle =
    "Expert UI/UX Designer for App, Landing Pages, and Music Apps";

// Slides Data
const slides = [
    {
        text: "Relics Of A Mortal Past 1 - NFT",
        image: "/images/optimized/slide-1.webp",
        url: "#",
    },
    {
        text: "Relics Of A Mortal Past 2 - NFT",
        image: "/images/optimized/slide-2.webp",
        url: "#",
    },
    {
        text: "Another NFT project",
        image: "/images/optimized/slide-3.webp",
        url: "#",
    },
    {
        text: "Relics Of A Mortal Past 2 - NFT",
        image: "/images/optimized/slide-4.webp",
        url: "#",
    },
    {
        text: "Relics Of A Mortal Past 2 - NFT",
        image: "/images/optimized/slide-5.webp",
        url: "#",
    },
];
---

<Layout title={siteTitle}>
    <!-- Main Section -->
    <main>
        <div
            class="absolute lg:-top-48 -z-10 -left-0 overflow-hidden pointer-events-none"
        >
            <img src="/images/optimized/bg-left-min.webp" />
        </div>

        <Hero />
        <Recent {slides} />
        <div
            class="absolute lg:top-2/3 -z-10 right-0 rotate-180 overflow-hidden pointer-events-none"
        >
            <img src="/images/optimized/bg-left-min.webp" />
        </div>
        <Contribution />
        <Socials />
    </main>
</Layout>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    gsap.registerPlugin(ScrollTrigger);

    const mm = gsap.matchMedia();

    // Desktop Animations (above 1024px)
    mm.add("(min-width: 1024px)", () => {
        // Your original animation
        let tl = gsap.timeline({
            defaults: {
                ease: "power4.inOut",
                duration: 3,
            },
        });
        tl.fromTo(
            ".heroImg",
            { x: 200, opacity: 0, duration: 1, delay: 2 },
            { x: 0, opacity: 1, duration: 1, ease: "power3.out" },
        )
            .fromTo(
                ".heroTitle",
                { x: -200, opacity: 0, duration: 1.5 },
                { x: 0, opacity: 1, duration: 1.5, ease: "power3.out" },
                "-=1.2",
            )
            .fromTo(
                ".heroTxt",
                { opacity: 0, y: 100, duration: 1 },
                { opacity: 1, y: 0, duration: 1, ease: "power3.out" },
                "-=1",
            )
            .fromTo(
                ".heroBtn",
                { x: -100, opacity: 0, stagger: 1.5, duration: 1 },
                { x: 0, opacity: 1, stagger: 0.5, duration: 1 },
                "-=1",
            );
    });

    // Mobile Animations (below 1024px) - simpler fade animations
    mm.add("(max-width: 1023px)", () => {
        let tl = gsap.timeline({
            defaults: {
                ease: "power4.inOut",
                duration: 1.5,
            },
        });
        tl.fromTo(".heroImg", { opacity: 0 }, { opacity: 1 })
            .fromTo(".heroTitle", { opacity: 0 }, { opacity: 1 }, "-=1")
            .fromTo(".heroTxt", { opacity: 0 }, { opacity: 1 }, "-=1")
            .fromTo(
                ".heroBtn",
                { opacity: 0 },
                {
                    opacity: 1,
                    stagger: 0.2,
                },
                "-=1",
            );
    });

    // ScrollTrigger animations remain the same
    gsap.utils.toArray(".banner-title").forEach((section) => {
        gsap.fromTo(
            section,
            { opacity: 0.5, filter: "blur(2px)", y: 100 },
            {
                opacity: 1,
                filter: "blur(0px)",
                y: 0,
                scrollTrigger: {
                    trigger: section,
                    start: "-=1000",
                    end: "-=800",
                    scrub: 1,
                    toggleActions: "play pause resume reset",
                },
            },
        );
    });
</script>
